scoreboard players enable @a get_book

function minerpg:level/tick
function minerpg:class/tick
function minerpg:status/tick
function minerpg:skill/tick

execute as @a store result score @s UUID1 run data get entity @s UUID[0]
execute as @a store result score @s UUID2 run data get entity @s UUID[1]
execute as @a store result score @s UUID3 run data get entity @s UUID[2]
execute as @a store result score @s UUID4 run data get entity @s UUID[3]

execute as @e[nbt={Item:{tag:{Tags:["rpgBook"]}}}, type=item] run data merge entity @s {Item:{id:"minecraft:writable_book", tag:{display:{Name:'[{"text":"RPG profile","italic": false}]'},Tags:["rpgBook"]}}}
execute as @a[scores={get_book=1..}] run function minerpg:main/get_book

execute as @a[nbt={SelectedItem:{tag:{Tags:["rpgBook"]}}}, scores={class=0}] run item replace entity @s weapon.mainhand with written_book{pages:['["",{"text":" \\u0020 \\u0020 \\u0020 \\u0020 mine"},{"text":"RPG","color":"red"},{"text":"\\n\\n\\nName: ","color":"reset"},{"selector":"@s", "hoverEvent": {"action": "show_item"}},{"text":"\\nLv: "},{"score":{"name":"@s","objective":"level"}},{"text":"("},{"score":{"name":"@s","objective": "cur_xp"}},{"text":"/"},{"score":{"name": "@s","objective": "max_xp"}},{"text":")\\nClassNo: "},{"score":{"name":"@s","objective":"class"}},{"text":"\\nLeft Status: "},{"score":{"name":"@s","objective":"left_status"}},{"text":"\\nMana: "},{"score":{"name":"@s","objective": "cur_mana"}},{"text":"/"},{"score":{"name":"@s","objective":"max_mana"}}]','["",{"selector":"@s"},{"text":"\'s Status\\n\\nLeft Status: "},{"score":{"name":"@s","objective":"left_status"}},{"text":"\\nSTR: ","hoverEvent":{"action":"show_text","contents":"Improve your Strength\\nAttack Damage +5% for 1p\\nMax Health +0.5 for 5p"}},{"score":{"name":"@s","objective":"str"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/str"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/str"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/str"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/str"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\nINT: ", "hoverEvent": {"action":"show_text", "contents":"Improve your Inteligence\\nMana +5 for 1p"}},{"score":{"name":"@s","objective":"int"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/int"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/int"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/int"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/int"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\nDEX: ", "hoverEvent": {"action":"show_text","contents": "Improve your Dexterity\\nMovement speed +0.01 for 1p\\nAttack speed +0.01 for 1p"}},{"score":{"name":"@s","objective":"dex"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/dex"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/dex"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/dex"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/dex"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\nCHA: ","hoverEvent": {"action":"show_text", "contents": "Improve your Charisma\\nyou may slow down your enamy\\nSlow power for 10p"}},{"score":{"name":"@s","objective":"cha"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/cha"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/cha"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/cha"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/cha"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\nCON: ","hoverEvent": {"action": "show_text","contents": "Improve your Constitution\\nMax Health +0.5 for 3p\\nKnockback Resistance +0.01 for 5p\\nArmor +1 for 10p"}},{"score":{"name":"@s","objective":"con"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/cons"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/cons"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/cons"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/cons"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\n"},{"text":"LUK:","hoverEvent":{"action":"show_text","contents":"Improve your Luck\\nLuck +0.5 for 2p"}},{"text":" "},{"score":{"name":"@s","objective":"luk"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/luk"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/luk"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/luk"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/luk"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\n\\n"},{"text":"Reset Status","color":"red","clickEvent":{"action":"run_command","value":"/function minerpg:status/reset_status"},"hoverEvent":{"action":"show_text","contents":"click to reset your status(your all used status will be unused)"}}]','["",{"text":" \\u0020 \\u0020Class No Helper\\n-------------------\\n0: you don\'t have class\\n1: Warrior\\n2: Assasine\\n3: Archer\\n4: Wizard\\n...\\nYour Class: "},{"score":{"name":"@s","objective":"class"}},{"text":"\\n\\n"},{"text":" \\u0020 \\u0020 \\u0020","color":"dark_aqua"},{"text":"More Detail","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function minerpg:class/more_detail"},"hoverEvent":{"action":"show_text","contents":"click me!"}}]'],title:"RPG profile",author:"god of rpg",Tags:["rpgBook"]}
execute as @a[nbt={Inventory:[{Slot:-106b, tag:{Tags:["rpgBook"]}}]}, scores={class=0}] run item replace entity @s weapon.offhand with written_book{pages:['["",{"text":" \\u0020 \\u0020 \\u0020 \\u0020 mine"},{"text":"RPG","color":"red"},{"text":"\\n\\n\\nName: ","color":"reset"},{"selector":"@s", "hoverEvent": {"action": "show_item"}},{"text":"\\nLv: "},{"score":{"name":"@s","objective":"level"}},{"text":"("},{"score":{"name":"@s","objective": "cur_xp"}},{"text":"/"},{"score":{"name": "@s","objective": "max_xp"}},{"text":")\\nClassNo: "},{"score":{"name":"@s","objective":"class"}},{"text":"\\nLeft Status: "},{"score":{"name":"@s","objective":"left_status"}},{"text":"\\nMana: "},{"score":{"name":"@s","objective": "cur_mana"}},{"text":"/"},{"score":{"name":"@s","objective":"max_mana"}}]','["",{"selector":"@s"},{"text":"\'s Status\\n\\nLeft Status: "},{"score":{"name":"@s","objective":"left_status"}},{"text":"\\nSTR: ","hoverEvent":{"action":"show_text","contents":"Improve your Strength\\nAttack Damage +5% for 1p\\nMax Health +0.5 for 5p"}},{"score":{"name":"@s","objective":"str"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/str"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/str"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/str"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/str"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\nINT: ", "hoverEvent": {"action":"show_text", "contents":"Improve your Inteligence\\nMana +5 for 1p"}},{"score":{"name":"@s","objective":"int"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/int"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/int"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/int"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/int"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\nDEX: ", "hoverEvent": {"action":"show_text","contents": "Improve your Dexterity\\nMovement speed +0.01 for 1p\\nAttack speed +0.01 for 1p"}},{"score":{"name":"@s","objective":"dex"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/dex"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/dex"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/dex"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/dex"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\nCHA: ","hoverEvent": {"action":"show_text", "contents": "Improve your Charisma\\nyou may slow down your enamy\\nSlow power for 10p"}},{"score":{"name":"@s","objective":"cha"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/cha"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/cha"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/cha"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/cha"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\nCON: ","hoverEvent": {"action": "show_text","contents": "Improve your Constitution\\nMax Health +0.5 for 3p\\nKnockback Resistance +0.01 for 5p\\nArmor +1 for 10p"}},{"score":{"name":"@s","objective":"con"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/cons"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/cons"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/cons"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/cons"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\n"},{"text":"LUK:","hoverEvent":{"action":"show_text","contents":"Improve your Luck\\nLuck +0.5 for 2p"}},{"text":" "},{"score":{"name":"@s","objective":"luk"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/luk"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/luk"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/luk"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/luk"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text":"\\n\\n"},{"text":"Reset Status","color":"red","clickEvent":{"action":"run_command","value":"/function minerpg:status/reset_status"},"hoverEvent":{"action":"show_text","contents":"click to reset your status(your all used status will be unused)"}}]','["",{"text":" \\u0020 \\u0020Class No Helper\\n-------------------\\n0: you don\'t have class\\n1: Warrior\\n2: Assasine\\n3: Archer\\n4: Wizard\\n...\\nYour Class: "},{"score":{"name":"@s","objective":"class"}},{"text":"\\n\\n"},{"text":" \\u0020 \\u0020 \\u0020","color":"dark_aqua"},{"text":"More Detail","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function minerpg:class/more_detail"},"hoverEvent":{"action":"show_text","contents":"click me!"}}]'],title:"RPG profile",author:"god of rpg",Tags:["rpgBook"]}

execute as @a[nbt={SelectedItem:{tag:{Tags:["rpgBook"]}}}, scores={class=1..}] run item replace entity @s weapon.mainhand with written_book{pages:['["",{"text":" \\u0020 \\u0020 \\u0020 \\u0020 mine"},{"text":"RPG","color":"red"},{"text":"\\n\\n\\nName: ","color":"reset"},{"selector":"@s", "hoverEvent": {"action": "show_item"}},{"text":"\\nLv: "},{"score":{"name":"@s","objective":"level"}},{"text":"("},{"score":{"name":"@s","objective": "cur_xp"}},{"text":"/"},{"score":{"name": "@s","objective": "max_xp"}},{"text":")\\nClassNo: "},{"score":{"name":"@s","objective":"class"}},{"text":"\\nLeft Status: "},{"score":{"name":"@s","objective":"left_status"}},{"text":"\\nMana: "},{"score":{"name":"@s","objective": "cur_mana"}},{"text":"/"},{"score":{"name":"@s","objective":"max_mana"}}]','["",{"selector":"@s"},{"text":"\'s Status\\n\\nLeft Status: "},{"score":{"name":"@s","objective":"left_status"}},{"text":"\\nSTR: ","hoverEvent":{"action":"show_text","contents":"Improve your Strength\\nAttack Damage +5% for 1p\\nMax Health +0.5 for 5p"}},{"score":{"name":"@s","objective":"str"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/str"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/str"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/str"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/str"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_str"}},{"text": ")"},{"text":"\\nINT: ", "hoverEvent": {"action":"show_text", "contents":"Improve your Inteligence\\nMana +5 for 1p"}},{"score":{"name":"@s","objective":"int"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/int"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/int"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/int"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/int"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_int"}},{"text": ")"},{"text":"\\nDEX: ", "hoverEvent": {"action":"show_text","contents": "Improve your Dexterity\\nMovement speed +0.01 for 1p\\nAttack speed +0.01 for 1p"}},{"score":{"name":"@s","objective":"dex"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/dex"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/dex"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/dex"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/dex"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_dex"}},{"text": ")"},{"text":"\\nCHA: ","hoverEvent": {"action":"show_text", "contents": "Improve your Charisma\\nyou may slow down your enamy\\nSlow power for 10p"}},{"score":{"name":"@s","objective":"cha"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/cha"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/cha"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/cha"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/cha"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_cha"}},{"text": ")"},{"text":"\\nCON: ","hoverEvent": {"action": "show_text","contents": "Improve your Constitution\\nMax Health +0.5 for 3p\\nKnockback Resistance +0.01 for 5p\\nArmor +1 for 10p"}},{"score":{"name":"@s","objective":"con"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/cons"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/cons"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/cons"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/cons"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_con"}},{"text": ")"},{"text":"\\nLUK:","hoverEvent":{"action":"show_text","contents":"Improve your Luck\\nLuck +0.5 for 2p"}},{"text":" "},{"score":{"name":"@s","objective":"luk"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/luk"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/luk"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/luk"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/luk"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_luk"}},{"text": ")"},{"text":"\\n\\n"},{"text":"Reset Status","color":"red","clickEvent":{"action":"run_command","value":"/function minerpg:status/reset_status"},"hoverEvent":{"action":"show_text","contents":"click to reset your status(your all used status will be unused)"}}]','["",{"text":" \\u0020 \\u0020Class No Helper\\n-------------------\\n0: you don\'t have class\\n1: Warrior\\n2: Assasine\\n3: Archer\\n4: Wizard\\n...\\nYour Class: "},{"score":{"name":"@s","objective":"class"}},{"text":"\\n\\n"},{"text":" \\u0020 \\u0020 \\u0020","color":"dark_aqua"},{"text":"More Detail","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function minerpg:class/more_detail"},"hoverEvent":{"action":"show_text","contents":"click me!"}}]'],title:"RPG profile",author:"god of rpg",Tags:["rpgBook"]}
execute as @a[nbt={Inventory:[{Slot:-106b, tag:{Tags:["rpgBook"]}}]}, scores={class=1..}] run item replace entity @s weapon.offhand with written_book{pages:['["",{"text":" \\u0020 \\u0020 \\u0020 \\u0020 mine"},{"text":"RPG","color":"red"},{"text":"\\n\\n\\nName: ","color":"reset"},{"selector":"@s", "hoverEvent": {"action": "show_item"}},{"text":"\\nLv: "},{"score":{"name":"@s","objective":"level"}},{"text":"("},{"score":{"name":"@s","objective": "cur_xp"}},{"text":"/"},{"score":{"name": "@s","objective": "max_xp"}},{"text":")\\nClassNo: "},{"score":{"name":"@s","objective":"class"}},{"text":"\\nLeft Status: "},{"score":{"name":"@s","objective":"left_status"}},{"text":"\\nMana: "},{"score":{"name":"@s","objective": "cur_mana"}},{"text":"/"},{"score":{"name":"@s","objective":"max_mana"}}]','["",{"selector":"@s"},{"text":"\'s Status\\n\\nLeft Status: "},{"score":{"name":"@s","objective":"left_status"}},{"text":"\\nSTR: ","hoverEvent":{"action":"show_text","contents":"Improve your Strength\\nAttack Damage +5% for 1p\\nMax Health +0.5 for 5p"}},{"score":{"name":"@s","objective":"str"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/str"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/str"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/str"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/str"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_str"}},{"text": ")"},{"text":"\\nINT: ", "hoverEvent": {"action":"show_text", "contents":"Improve your Inteligence\\nMana +5 for 1p"}},{"score":{"name":"@s","objective":"int"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/int"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/int"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/int"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/int"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_int"}},{"text": ")"},{"text":"\\nDEX: ", "hoverEvent": {"action":"show_text","contents": "Improve your Dexterity\\nMovement speed +0.01 for 1p\\nAttack speed +0.01 for 1p"}},{"score":{"name":"@s","objective":"dex"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/dex"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/dex"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/dex"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/dex"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_dex"}},{"text": ")"},{"text":"\\nCHA: ","hoverEvent": {"action":"show_text", "contents": "Improve your Charisma\\nyou may slow down your enamy\\nSlow power for 10p"}},{"score":{"name":"@s","objective":"cha"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/cha"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/cha"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/cha"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/cha"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_cha"}},{"text": ")"},{"text":"\\nCON: ","hoverEvent": {"action": "show_text","contents": "Improve your Constitution\\nMax Health +0.5 for 3p\\nKnockback Resistance +0.01 for 5p\\nArmor +1 for 10p"}},{"score":{"name":"@s","objective":"con"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/cons"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/cons"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/cons"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/cons"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_con"}},{"text": ")"},{"text":"\\nLUK:","hoverEvent":{"action":"show_text","contents":"Improve your Luck\\nLuck +0.5 for 2p"}},{"text":" "},{"score":{"name":"@s","objective":"luk"}},{"text":"\\u25b3","clickEvent":{"action":"run_command","value":"/function minerpg:status/up/luk"},"hoverEvent":{"action":"show_text","contents":"+1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+1"}},{"text":"\\u25bd","clickEvent":{"action":"run_command","value":"/function minerpg:status/down/luk"},"hoverEvent":{"action":"show_text","contents":"-1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"-1"}},{"text":"\\u25b2","clickEvent":{"action":"run_command","value":"/function minerpg:status/upt/luk"},"hoverEvent":{"action":"show_text","contents":"+10"}},{"text":" ","hoverEvent":{"action":"show_text","contents":"+10"}},{"text":"\\u25bc","clickEvent":{"action":"run_command","value":"/function minerpg:status/downt/luk"},"hoverEvent":{"action":"show_text","contents":"-10"}},{"text": "("},{"score":{"name": "@s","objective": "class_luk"}},{"text": ")"},{"text":"\\n\\n"},{"text":"Reset Status","color":"red","clickEvent":{"action":"run_command","value":"/function minerpg:status/reset_status"},"hoverEvent":{"action":"show_text","contents":"click to reset your status(your all used status will be unused)"}}]','["",{"text":" \\u0020 \\u0020Class No Helper\\n-------------------\\n0: you don\'t have class\\n1: Warrior\\n2: Assasine\\n3: Archer\\n4: Wizard\\n...\\nYour Class: "},{"score":{"name":"@s","objective":"class"}},{"text":"\\n\\n"},{"text":" \\u0020 \\u0020 \\u0020","color":"dark_aqua"},{"text":"More Detail","color":"dark_aqua","clickEvent":{"action":"run_command","value":"/function minerpg:class/more_detail"},"hoverEvent":{"action":"show_text","contents":"click me!"}}]'],title:"RPG profile",author:"god of rpg",Tags:["rpgBook"]}

execute as @a unless score @s level matches -2147483648..2147483647 run function minerpg:main/reset
#death check
execute as @e store result score @s entity_health run data get entity @s Health

execute as @a[scores={health_check=..0}] if score @s health_check < @s health run function minerpg:status/refresh
execute as @e if score @s entity_health < @s health_check run function minerpg:status/cha/main

execute as @a store result score @s health_check run scoreboard players get @s health
execute as @e store result score @s health_check run data get entity @s Health

execute as @a unless score @s server_tick = #server server_tick run function minerpg:status/refresh 
scoreboard players add #server server_tick 1
scoreboard players operation @s server_tick = #server server_tick